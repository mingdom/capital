# Dev Log — 2025-09-18

## Summary
- Reviewed the `portfolio_cli web` command to understand how the CLI launches the Streamlit dashboard.
- Confirmed the command builds an environment for `streamlit run streamlit_app.py` and passes portfolio defaults via env vars.
- Noted the guard clause that exits early when the `streamlit` executable is unavailable, explaining the current inability to use the feature.
- Reworked the Streamlit app into a Fidelity-focused workflow with CSV upload support, added a `make web` helper, and removed SavvyTrader wiring from the `web` command.
- Added time-range toggles (3M/YTD/1Y/All) for the monthly returns table and cumulative chart, and switched the chart to Altair with explicit axis labels.
- Updated Streamlit layout calls to the new `width="stretch"` API to silence deprecation warnings about `use_container_width`.

## Current State
- `portfolio_cli web` requires `streamlit` on the PATH; without it, Typer exits with the message “Streamlit is not installed...”.
- The command now hardcodes Fidelity as the active source, passes the fallback CSV path/risk-free rate via env vars, and exposes a `make web` target for convenience.
- Tests: `PYTHONPATH=. ./venv/bin/pytest -q`.
- Updated `portfolio_cli web` to import Streamlit directly and invoke it via `python -m streamlit`, avoiding PATH dependency issues reported after running `make web`.
- The dashboard (`streamlit_app.py`) renders a Fidelity-only interface with file upload + fallback path, time-range toggles for tables/charts, summary metrics, cumulative chart with axis labels, and optional SPY/QQQ benchmarks.

## Next Ideas
- Add clearer installation guidance (e.g., `pip install streamlit`) alongside the CLI help/README to reduce setup friction.
- Consider bundling a `portfolio web doctor` check that verifies file paths and dependency availability before launching Streamlit.
- Explore packaging the dashboard behind an optional extra (e.g., `pip install .[web]`) so users can opt-in to heavier dependencies while keeping the CLI helpful.
